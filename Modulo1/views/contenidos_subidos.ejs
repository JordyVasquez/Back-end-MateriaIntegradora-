<!DOCTYPE html> 
<html lang="es"> 
  <head> 
    <meta charset="utf-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>Configuracion Server</title> 
<link id="template-file" href="templates/template.ejs" rel="import" />  


    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
     <link href="css/dashboard.css" rel="stylesheet">
          <link href="css/dataTable.css" rel="stylesheet">
     
  </head> 
  <body> 
    <script>
    var getImport = document.querySelector('#template-file'); 
var getContent = getImport.import.querySelector('#template'); 
document.body.appendChild(document.importNode(getContent, true));  

  </script>
         <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
         
          <h1 class="page-header" id="page-header">Contenidos Subidos al Servidor</h1>
          <form action="/admin_cont_sub" id='subir' name="subir" method="post">

          <div class="btn-group ">
<button id="new" name="new" type="button" class="btn btn-default">
      <span  class="glyphicon glyphicon-plus"> Crear</span>
    </button>
      <button id="edit"  name="edit" type="button" class="btn btn-default">
      <span class="glyphicon glyphicon-pencil"> Editar</span>
    </button>
<button id="delete" name="delete" type="button" class="btn btn-default">
      <span class="glyphicon glyphicon-trash"> Eliminar</span>
    </button>
</div>
<br></br>
          <table id="table_con" class="table table-striped table-hover">
  <thead class="thead-inverse">
    <tr>
      <th>Titulo</th>
      <th style="display: none;">ID</th>
      <th>Imagenes</th>
      <th>Videos</th>
      <th>Contenido Live[Escenas]</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
 <input id='ID' type='hidden' name='ID'>
 </input>

  <input id='actividad' type='hidden' name='actividad' ></input>

</form>
        </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>

     <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>  
    <script src="js/bootstrap.min.js"></script>
        <script src="js/dataTable.js"></script>
             <script src='js/LZString.js'></script>
     <script> 
     var schema;
            schema =  <%- JSON.stringify(resultado) %>;
              var table = document.getElementById("table_con").getElementsByTagName("tbody")[0];
            for (var i = 0; i < schema.length; i++) {
             
    var row = table.insertRow(0);
    var cell1 = row.insertCell(0);
    
    var json_con= JSON.parse(LZString.decompressFromBase64(schema[i].json));
  //  alert("transmedia: "+JSON.stringify(json_con)); 
    cell1.innerHTML = json_con.Titulo;
  //  alert(JSON.stringify(schema[i]));
    

    var cell2 = row.insertCell(1);
    cell2.innerHTML =  schema[i].ID;
    cell2.style.display = 'none';

    var cell3 = row.insertCell(2);
    cell3.innerHTML =  json_con.Contenido_Trasmedia.Imagenes.length;
    
    var cell4 = row.insertCell(3);
    cell4.innerHTML =  json_con.Contenido_Trasmedia.Videos.length;
    var cell5 = row.insertCell(4);
    
    cell5.innerHTML =  json_con.Contenido_Live.Escenas.length;
            }
            $(document).ready(function(){
       var table = $('#table_con').DataTable();
        $('#table_con tbody').on( 'click', 'tr', function () {
        if ( $(this).hasClass('selected') ) {
            $(this).removeClass('selected');
        }
        else {
            table.$('tr.selected').removeClass('selected');
            $(this).addClass('selected');
        }
    } );
        
           $('#edit').click( function () {
                  $("#actividad").val('edit');
                  $("#ID").val($("tr.selected").find("td").eq(1).html());
                  document.subir.submit();
    } );
             $('#delete').click( function () {
                  $("#actividad").val('delete');
                  $("#ID").val($("tr.selected").find("td").eq(1).html());
                  document.subir.submit();
    } );
                    $('#new').click( function () {
                             window.location.href = "subir_cont"
    } );      
});

            </script>
  </body> 
</html>